# èŠ‚ç‚¹ç¼–è¾‘å™¨

::: tip

ğŸ§ª Working in Progress

:::

> åŸºäº [Vue Flow](https://vueflow.dev/) å®šåˆ¶ã€‚

èŠ‚ç‚¹ç¼–è¾‘å™¨æ˜¯ä¸€ä¸ªæ–°çš„è®¾æƒ³ï¼Œé€šè¿‡ç¼–è¾‘èŠ‚ç‚¹æ¥æ­å»ºæ¸¸æˆæµç¨‹ã€‚

è€Œ Fountain/AdvScript ç”¨äºæè¿°æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å†…å®¹ã€‚

## è®¡åˆ’

- [ ] èŠ‚ç‚¹ä¼šè¯æµç¨‹

## åŠŸèƒ½

- è‡ªåŠ¨å¸ƒå±€
- æ“ä½œèŠ‚ç‚¹
  - æ‹–æ‹½
  - ç¼©æ”¾
  - é€‰æ‹©
  - å¤åˆ¶
  - åˆ é™¤
  - è¿æ¥
- ä¿®æ”¹èŠ‚ç‚¹
  - èŠ‚ç‚¹ç±»å‹
  - èŠ‚ç‚¹å†…å®¹

## èŠ‚ç‚¹æ ¼å¼

ä¸€ç»„èŠ‚ç‚¹æ„æˆä¸€ä¸ªæµç¨‹ï¼Œä½œä¸ºä¸€ä¸ªæ¸¸æˆåœºæ™¯ã€‚

ä¸€ä¸ªæ¸¸æˆç« èŠ‚å¯åŒ…å«å¤šä¸ªåœºæ™¯ã€‚

åœºæ™¯å³å°†ç»“æŸæ—¶ï¼Œæ ¹æ®é€‰æ‹©é¢„åŠ è½½ä¸‹ä¸€ä¸ªåœºæ™¯ã€‚

### åŸºç¡€èŠ‚ç‚¹æ ¼å¼

```ts
export interface AdvFlowNode {
  id: string
  /**
   * èŠ‚ç‚¹ç±»å‹
   */
  type: string
  /**
   * è·³è½¬èŠ‚ç‚¹
   */
  next: string
}
```

æ‰€æœ‰èŠ‚ç‚¹ç»§æ‰¿è‡ªåŸºç¡€èŠ‚ç‚¹æ ¼å¼ã€‚

### ä¼šè¯èŠ‚ç‚¹

- è‡ªåŠ¨ TTS
- Fountain æ–‡æœ¬åŒ…å«å¤šæ®µäººç‰©å¯¹è¯

### é€‰æ‹©èŠ‚ç‚¹

- é€‰é¡¹
- è·³è½¬ä¸åŒèŠ‚ç‚¹

### äº‹ä»¶èŠ‚ç‚¹

- è®¾ç½®/ä¿®æ”¹èƒŒæ™¯å›¾ç‰‡
- è®¾ç½®/ä¿®æ”¹èƒŒæ™¯éŸ³ä¹

### ä»£ç èŠ‚ç‚¹

- æ‰§è¡Œè‡ªå®šä¹‰ä»£ç 

### å…¶ä»–èŠ‚ç‚¹

æœªæ¥æ‰©å±•

## è®¾è®¡æƒ³æ³•

æˆ‘ä»¬å¸Œæœ›æœ€ç»ˆçš„èŠ‚ç‚¹ä¿¡æ¯å¯ä»¥é€šè¿‡èŠ‚ç‚¹ç¼–è¾‘å™¨ç¼–è¾‘ä¸å®šåˆ¶ã€‚

å¯¹äºï¼ŒReact Flow/Vue Flow èŠ‚ç‚¹åº“æ¥è¯´ï¼Œä»–ä»¬é€šå¸¸å°† `nodes` ä¸ `edges` åˆ†å¼€æè¿°ã€‚

```ts
export const initialNodes = [
  {
    id: '1',
    type: 'input',
    data: { label: 'Input Node' },
    position: { x: 250, y: 25 },
  },

  {
    id: '2',
    // you can also pass a React component as a label
    data: { label: 'Default Node' },
    position: { x: 100, y: 125 },
  },
  {
    id: '3',
    type: 'output',
    data: { label: 'Output Node' },
    position: { x: 250, y: 250 },
  },
]

export const initialEdges = [
  { id: 'e1-2', source: '1', target: '2' },
  { id: 'e2-3', source: '2', target: '3', animated: true },
]
```

å¯¹äº Flow çš„å¤æ‚æ¡ˆä¾‹ï¼Œä»–ä»¬éœ€è¦æ»¡è¶³å¤šå¯¹å¤šçš„æƒ…å†µã€‚
ä¸”è¿˜å¯èƒ½åŒ…å«èŠ‚ç‚¹çš„ä½ç½®ã€ç¼©æ”¾ã€æ ·å¼ç­‰ä¿¡æ¯ï¼Œè€Œè¿™éƒ¨åˆ†ä¿¡æ¯åœ¨æœ€ç»ˆçš„æ¸¸æˆæ•°æ®ï¼ˆJSONï¼‰ä¸­é€šå¸¸æ˜¯ä¸éœ€è¦çš„ã€‚

å› æ­¤å¿…ç„¶ä»æ—§å­˜åœ¨ä¸€ä¸ªä»èŠ‚ç‚¹ä¿¡æ¯è½¬åŒ–ä¸ºæœ€ç»ˆæ¸¸æˆ JSON çš„è¿‡ç¨‹ï¼Œä»¥å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ã€‚

ä½†åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼ŒèŠ‚ç‚¹æµé€šå¸¸æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œä» A èŠ‚ç‚¹è·³è½¬åˆ° B èŠ‚ç‚¹ï¼Œè€Œä¸ä¼šä» A èŠ‚ç‚¹åŒæ—¶è·³è½¬è‡³ B å’Œ C èŠ‚ç‚¹ã€‚
å­˜åœ¨ç‰¹æ®Šçš„é€‰æ‹©èŠ‚ç‚¹ï¼Œå®ƒå¯èƒ½å› ä¸åŒé€‰æ‹©è€Œè·³è½¬è‡³ä¸åŒèŠ‚ç‚¹ï¼Œä½†è·³è½¬çš„ç›®æ ‡èŠ‚ç‚¹ä»æ˜¯å•ä¸ªã€‚

```mermaid
flowchart LR
  source["èŠ‚ç‚¹ç¼–è¾‘å™¨ä¸­çš„èŠ‚ç‚¹ä¿¡æ¯"] --èŠ‚ç‚¹ä¿¡æ¯å‹ç¼©--> published["æ¸¸æˆä½¿ç”¨çš„ JSON æ•°æ®"]
```
